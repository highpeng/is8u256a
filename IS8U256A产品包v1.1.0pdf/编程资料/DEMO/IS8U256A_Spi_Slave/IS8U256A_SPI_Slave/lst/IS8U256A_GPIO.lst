C51 COMPILER V9.02   IS8U256A_GPIO                                                         12/11/2014 10:38:42 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE IS8U256A_GPIO
OBJECT MODULE PLACED IN .\obj\IS8U256A_GPIO.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE src\IS8U256A_GPIO.c LARGE BROWSE DEBUG OBJECTEXTEND PRINT(.\lst\IS8U256A_GP
                    -IO.lst) OBJECT(.\obj\IS8U256A_GPIO.obj)

line level    source

   1          /*********************************************************************
   2          *               Copyright(C)2012北京华大信安科技有限公司
   3          *                       All Rights Reserved      
   4          *
   5          * 文件名称：    IS8U256A_GPIO.c
   6          * 作    者：    李宪法
   7          * 版    本：    V1.0.0
   8          * 日    期：    2013-11
   9          * 功能描述：    
  10          * 功能列表：    
  11          *
  12          * 历史记录：
  13          * 1.  日期：    
  14          *         版本：
  15          *         作者：
  16          * 修改内容：
  17          *
  18          *********************************************************************/
  19          
  20          /*Includes----------------------------------------------------------*/
  21          #include "..\inc\IS8U256X.h"
  22          
  23          /*Private typedef---------------------------------------------------*/
  24          /*Private define----------------------------------------------------*/
  25          /*Private macro-----------------------------------------------------*/
  26          /*Private variables-------------------------------------------------*/
  27          /*Private function prototypes---------------------------------------*/
  28          /*Private functions-------------------------------------------------*/
  29          
  30          /********************************************************************
  31           * Function Name        :GPIOInit
  32           * Description          :
  33           * Argument             :
  34           * Return               :
  35          *********************************************************************/
  36          void GPIOInit(void)
  37          {
  38   1              /*使能GPIO模块*/
  39   1              PCON1 |= 0x08;
  40   1      
  41   1              /*GPIO20--GPIO1全部选择GPIO通信*/
  42   1              COMCON = 0x0;
  43   1      
  44   1              /*配置GPIO8--GPIO1为上拉模式*/
  45   1              GPIOPR = 0xFF;
  46   1      
  47   1              /*配置GPIO16--GPIO9为上拉模式*/
  48   1              GPIOPR1 = 0xFF;
  49   1      
  50   1              /*配置GPIO20--GPIO17为上拉模式*/
  51   1              GPIOPR2 = 0xF5;
  52   1      }
  53          
  54          /*********************************************************************
C51 COMPILER V9.02   IS8U256A_GPIO                                                         12/11/2014 10:38:42 PAGE 2   

  55           * Function Name        :GPIOSetInput
  56           * Description          :
  57           * Argument             :
  58           * Return               :
  59          **********************************************************************/
  60          void GPIOSetInput(unsigned long const gpx)
  61          {
  62   1              unsigned long index=~gpx;
  63   1      
  64   1              /*遍历GPIO8--GPIO0是否有需设为输入模式*/
  65   1              GPIOCTRL &= (unsigned char)((index>>0)&0xFF);
  66   1      
  67   1              /*遍历GPIO16--GPIO9是否有需设为输入模式*/
  68   1              GPIOCTRL1 &= (unsigned char)((index>>8)&0xFF);
  69   1      
  70   1              /*遍历GPIO20--GPIO17是否有需设为输入模式*/
  71   1              GPIOCTRL2 &= (unsigned char)((index>>16)&0xFF);
  72   1      }
  73          
  74          /*********************************************************************
  75           * Function Name        :GPIOSetOutput
  76           * Description          :
  77           * Argument             :
  78           * Return               :
  79          **********************************************************************/
  80          void GPIOSetOutput(unsigned long const gpx)
  81          {
  82   1              unsigned long index=gpx;
  83   1      
  84   1              /*遍历GPIO8--GPIO0是否有需设为输入模式*/
  85   1              GPIOCTRL |= (unsigned char)((index>>0)&0xFF);
  86   1      
  87   1              /*遍历GPIO16--GPIO9是否有需设为输入模式*/
  88   1              GPIOCTRL1 |= (unsigned char)((index>>8)&0xFF);
  89   1      
  90   1              /*遍历GPIO20--GPIO17是否有需设为输入模式*/
  91   1              GPIOCTRL2 |= (unsigned char)((index>>16)&0xFF);
  92   1      }
  93          
  94          /*********************************************************************
  95           * Function Name        :GPIOReset
  96           * Description          :
  97           * Argument             :
  98           * Return               :
  99          **********************************************************************/
 100          void GPIOReset(unsigned long const gpx)
 101          {
 102   1              unsigned long index=~gpx;
 103   1      
 104   1              /*遍历GPIO8--GPIO0是否有需复位管脚*/
 105   1              GPIODATA &= (unsigned char)((index>>0)&0xFF);
 106   1      
 107   1              /*遍历GPIO16--GPIO9是否有需复位管脚*/
 108   1              GPIODATA1 &= (unsigned char)((index>>8)&0xFF);
 109   1      
 110   1              /*遍历GPIO20--GPIO17是否有需复位管脚*/
 111   1              GPIODATA2 &= (unsigned char)((index>>16)&0xFF);
 112   1      }
 113          
 114          /*********************************************************************
 115           * Function Name        :GPIOSet
 116           * Description          :
C51 COMPILER V9.02   IS8U256A_GPIO                                                         12/11/2014 10:38:42 PAGE 3   

 117           * Argument             :
 118           * Return               :
 119          **********************************************************************/
 120          void GPIOSet(unsigned long const gpx)
 121          {
 122   1              unsigned long index=gpx;
 123   1      
 124   1              /*遍历GPIO8--GPIO0是否有需置位管脚*/
 125   1              GPIODATA |= (unsigned char)((index>>0)&0xFF);
 126   1      
 127   1              /*遍历GPIO16--GPIO9是否有需置位管脚*/
 128   1              GPIODATA1 |= (unsigned char)((index>>8)&0xFF);
 129   1      
 130   1              /*遍历GPIO20--GPIO17是否有需置位管脚*/
 131   1              GPIODATA2 |= (unsigned char)((index>>16)&0xFF);
 132   1      }
 133          
 134          /***************************End of File*******************************/


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    270    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----      16
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
